@page "/search"
@inject NavigationManager NavigationManager

<h3>Search Results</h3>

@if (products == null || !products.Any())
{
    <p>No products found.</p>
}
else
{
    <ul>
        @foreach (var p in products)
        {
            <li>@p.Name - $@p.Price</li>
        }
    </ul>
}

@code {
    private List<Product> allProducts = new() {
        new Product { Name = "Benzol 20W/50 Mineral Oil", Price = 190 },
        new Product { Name = "Egyptian Petroleum Golden", Price = 80 },
        // باقي المنتجات
    };

    private List<Product> products = new();

    protected override void OnInitialized()
    {
        var uri = new Uri(NavigationManager.Uri);
        var query = System.Web.HttpUtility.ParseQueryString(uri.Query).Get("q");

        if (!string.IsNullOrWhiteSpace(query))
        {
            products = allProducts
                .Where(p => p.Name.Contains(query, StringComparison.OrdinalIgnoreCase))
                .ToList();
        }
    }

    public class Product
    {
        public string Name { get; set; }
        public decimal Price { get; set; }
    }
}
