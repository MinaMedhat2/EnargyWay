@inherits LayoutComponentBase
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider

<div class="layout-wrapper">
    <nav class="navbar">
        <div class="navbar-container">
            <!-- الشعار فقط، مع رابط للوحة التحكم الرئيسية -->
            <a class="navbar-brand" href="/store-manager-dashboard" title="Go to Dashboard">
                <img src="/logo4.jpg" alt="Company Logo" class="brand-logo" />
            </a>

            <!-- روابط التنقل في المنتصف -->
            <div class="navbar-links">
                <NavLink class="nav-link" href="store-manager/products">
                    <span class="oi oi-box" aria-hidden="true"></span>
                    <span>Products</span>
                </NavLink>
                <NavLink class="nav-link" href="store-manager/orders">
                    <span class="oi oi-list-rich" aria-hidden="true"></span>
                    <span>Orders</span>
                </NavLink>
            </div>

            <!-- زر تسجيل الخروج على اليمين -->
            <div class="navbar-user-actions">
                <button class="logout-button" @onclick="Logout" title="Logout">
                    <span class="oi oi-account-logout" aria-hidden="true"></span>
                    <span>Logout</span>
                </button>
            </div>
        </div>
    </nav>

    <main class="content-area">
        @Body
    </main>
</div>

<style>
    /* --- التحسين 1: بنية التصميم العامة --- */
    .layout-wrapper {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    .content-area {
        flex-grow: 1; /* يضمن أن المحتوى يملأ المساحة المتبقية */
        padding: 2.5rem;
        background-color: #f8f9fa; /* لون خلفية رمادي فاتح جداً ونظيف */
    }

    /* --- التحسين 2: تصميم الشريط العلوي (Navbar) --- */
    .navbar {
        background-color: #ffffff; /* خلفية بيضاء نظيفة */
        padding: 0 2rem; /* تقليل الحشوة العمودية وزيادة الأفقية */
        height: 72px; /* ارتفاع ثابت */
        border-bottom: 1px solid #dee2e6; /* خط سفلي ناعم */
        display: flex;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1020;
    }

    .navbar-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
    }

    /* --- التحسين 3: تصميم الشعار --- */
    .navbar-brand {
        display: flex;
        align-items: center;
    }

    .brand-logo {
        height: 44px; /* تكبير الشعار قليلاً */
        width: auto;
        transition: transform 0.3s ease;
    }

        .brand-logo:hover {
            transform: scale(1.05) rotate(-3deg); /* حركة بسيطة عند المرور */
        }

    /* --- التحسين 4: تصميم روابط التنقل --- */
    .navbar-links {
        display: flex;
        gap: 0.5rem; /* تقليل المسافة بين الروابط */
    }

    .nav-link {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.6rem 1.2rem;
        border-radius: 8px;
        color: #495057; /* لون رمادي داكن للنص */
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
        transition: color 0.2s ease, background-color 0.2s ease;
        position: relative;
    }

        .nav-link:hover {
            background-color: #f1f3f5; /* خلفية رمادية فاتحة عند المرور */
            color: #212529;
        }

        .nav-link.active {
            background-color: #e9ecef; /* خلفية أغمق للرابط النشط */
            color: #0d6efd; /* لون أزرق مميز للرابط النشط */
        }

    /* --- التحسين 5: تصميم زر الخروج --- */
    .navbar-user-actions {
        display: flex;
    }

    .logout-button {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background-color: transparent;
        border: none;
        color: #6c757d;
        padding: 0.6rem 1.2rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 0.95rem;
        transition: color 0.2s ease, background-color 0.2s ease;
    }

        .logout-button:hover {
            background-color: #f8d7da; /* خلفية حمراء فاتحة جداً */
            color: #b02a37; /* لون أحمر داكن */
        }
</style>

@code {
    private async Task Logout()
    {
        // الكود الصحيح لتسجيل الخروج
        Navigation.NavigateTo("/login", forceLoad: true);
    }
}
